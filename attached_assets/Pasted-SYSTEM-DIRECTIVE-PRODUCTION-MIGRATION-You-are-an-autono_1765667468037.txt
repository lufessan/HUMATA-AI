SYSTEM DIRECTIVE â€” PRODUCTION MIGRATION

You are an autonomous senior software architect and backend engineer.

ğŸ¯ MISSION

Migrate the project away from Gemini (Vision & File Understanding) entirely and replace it with a fully free, self-hosted, multi-format file & image understanding system.

You must:

Write ALL required code yourself

Configure ALL dependencies

Modify ALL existing logic

Ensure production stability

The user will NOT write or review code during execution.

ğŸ§  CURRENT ARCHITECTURE (CONTEXT)

ğŸ§  â€œBrainâ€: Grok 3 / LLaMA (already working â€” do NOT change)

ğŸ‘ï¸ â€œEyeâ€: Gemini (Vision & file reading) â†’ MUST BE REMOVED

ğŸ§¨ PHASE 1 â€” FULL GEMINI REMOVAL

Completely remove:

All Gemini SDKs

All Gemini API calls

All Gemini environment variables

All Gemini-related logic or fallbacks

After this phase, the project must contain ZERO Gemini references.

ğŸ‘ï¸ PHASE 2 â€” BUILD THE NEW â€œEYEâ€ (VISION + FILE READER)

Design and implement a universal file understanding system that supports:

Supported inputs

Images (PNG, JPG, JPEG, WEBP)

PDFs (text-based and scanned)

Word documents (DOCX)

Plain text files (TXT, MD)

Core requirements

100% free and open-source

CPU-only (Render Free compatible)

Strong Arabic support

Stable and deterministic output

ğŸ” PHASE 3 â€” INTELLIGENT FILE HANDLING

You must:

Automatically detect file type

Extract text using the best free method per format

Use OCR ONLY when needed (scanned content or images)

Normalize and unify extracted text into a single text stream

ğŸ§  PHASE 4 â€” BRAIN INTEGRATION

Pass extracted text to the existing Grok / LLaMA brain.

The brain must:

Correct Arabic OCR mistakes

Reconstruct sentences

Understand context

Perform explanation, summarization, or Q&A

Strict rule:

The Eye reads

The Brain thinks

Do NOT mix responsibilities.

ğŸŒ PHASE 5 â€” API & UI INTEGRATION

Replace Gemini endpoints with a new internal endpoint for file reading

Maintain existing frontend behavior and UX

Preserve Arabic RTL support

Implement loading states and clear error handling

ğŸš« HARD CONSTRAINTS (NON-NEGOTIABLE)

âŒ No paid APIs

âŒ No API keys

âŒ No Gemini

âŒ No GPU

âŒ No external OCR services

âŒ No partial implementations

The system MUST deploy and run on Render Free Plan.

âœ… FINAL DELIVERABLES

Before completion:

Confirm Gemini is fully removed

Confirm all file types are supported

Confirm Arabic works correctly

Confirm successful deployment on Render Free

Provide a short execution report:

What was removed

What was built

How the new system works

ğŸ§  FINAL NOTE

This task is not about replacing a model â€”
it is about building a clean, modular, future-proof vision system.

Act accordingly.